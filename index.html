<!DOCTYPE html>
<html>
<head>

<!-- Meta -->

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width" />
<meta name="language" content="EN" />
<meta name="Description" content="A sample To-Do application built with latest technologies with a superb UI">

<!-- /Meta -->

<title>To-Do Application</title>

<!-- Dublin Core -->

<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.title" content="To Do Application">
<meta name="DC.description" content="A sample To-Do application built with latest technologies with a superb UI">
<meta name="DC.language" scheme="ISO639-1" content="en">
<meta name="DC.publisher" content="AntJanus">

<!-- /Dublin Core -->

<!-- Javascript -->
<script src="js/head.js" type="text/javascript"></script>
<script type="text/javascript">
// loading my scripts
head.js(
{jquery: "js/jquery.js"}, 
{knockout: "js/knockout.js"},
function(){


//knockout declarations

// what's a task? class declaration
function todoTask(task, rawDate){
	var self = this;
	self.task = task;
	// needs to be parsed to be viewed
	self.rawDate = rawDate; 
	self.completion = false;
	// parsing the rawDate into a nicer format
	self.date = ko.computed(function(){
		var day = rawDate.getDate();
		var month = rawDate.getMonth()+1;
		var year = rawDate.getFullYear();
		var dateFull = month + '/' + day + '/' + year;
		return dateFull;
	});
}

// what are we looking at again?
function taskViewModel(){
	
	var self = this;

	// task array and defaults
	self.tasks = ko.observableArray([
		new todoTask("Pickup Milk", new Date()),
		new todoTask("Call Bank", new Date())
	]);	
	
	// Input Data 
	self.newTask = "";
	
	//Let's add some data
	 self.addTask = function() {
        self.tasks.push(new todoTask(self.newTask, new Date()));
		self.newTask= " ";
    }
	
	//remove task
	self.removeTask = function(){
		self.tasks.remove(this);
	}
}

// fire it up!
ko.applyBindings(new taskViewModel());

});

</script>

<!-- /Javascript -->

<style></style>
</head>
<body>
<header>
  <h1>Great To-Do Application</h1>
  <h3>You've <span class="tasks-left"> </span> to do</h3>
</header>
<div id="main-container">
  
  <!-- Input Container where new tasks can be added -->
  <section id="input-container">
  <form data-bind="submit: addTask">
      <input type="text" name="task-input" id="task-input" data-bind="value: newTask"/>
      <input type="button" data-bind="click: addTask" value="add task!" />
      </form>
  </section>
  <!-- end input-container --> 
  
  <!-- Task Container where tasks are located -->
  <section id="task-container">
      <h2>Tasks</h2>
      <!-- task list -->
      <div class="task-list" data-bind="foreach: tasks">
      <article class="task"> <span class="checkbox">[]</span><span class="task-name" data-bind="text: task"></span> <span class="task-date" data-bind="text: date"></span> <a href="javascript:void(0)" class="task-remove" data-bind="click: $root.removeTask">X</a> 
      </article>
      </div><!-- /task-list -->
  </section>
  <footer>
  Created by AntJanus
  </footer>
</div>
</body>
</html>